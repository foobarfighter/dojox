<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title></title>
	<script type="text/javascript" src="../../../../dojo/dojo.js"
	    djConfig="isDebug: true"></script>
	<script type="text/javascript">
		dojo.require("doh.runner");
		dojo.require("dojox.rails");

        doh.register("dojox.rails.tests.decorators.Request", [
            {
                name: "Base",
                runTest: function(t) {
                    dojox.rails.parse();
                    var request = dojox.rails.manager.byNode("request-with-functions");
                    t.t(request != null);

                    t.is(loadCb, request._cb['load']);
                    t.is(errorCb, request._cb['error']);
                    
                    try {
                        request._cb['loaded']();
                        t.t(false);
                    }catch(e){
                        var expectedError = e.message.match("unsupported operation") != null;
                        t.t(expectedError);
                    }
                }
            }
        ]);

        function loadCb(request) {}
        function errorCb(request) {}

        dojo.addOnLoad(function() {
            doh.run();
        });
	</script>
</head>
<body>

<script type="javascript/json" id="request-with-functions" data-js-type="request"
      data-success-code="loadCb"
      data-failure-code="errorCb"
      data-complete-code="function(request) {}"
      data-interactive-code="function(request) {}"
      data-loaded-code="function(request) {}"
      data-loading-code="function(request) {}">
</script>

</body>
</html>